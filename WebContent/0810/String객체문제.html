<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/public.css">
<script>
	function proc1(){
		code = prompt("주민등록번호를 입력해주세요");
		
		birthYear = parseInt(code.slice(0,2)); // 생년
		
		birthMonth = code.slice(2,4); // 생월
		
		birthDay = code.slice(4,6); // 생일
		
		gender = code.substring(7,8) // 성별
		
		now = new Date(); // 오늘 날짜
		
		nowYear = parseInt(now.getFullYear());
		
		if (gender == 1 || gender == 2) {
			if (birthMonth <= 12 || birthDay <= 31) {
				if (gender == 1) {
					res = "생년 : 19" +birthYear + "년 <br>";
					res += "생월 : " + birthMonth.trim() + "월 <br>";
					res += "생일 : " + birthDay + "일 <br>";
					res += "성별 : 남성<br>";
					res += "나이 : " + (nowYear-1900-birthYear) ;
				}else{
					res = "생년 : 19" +birthYear + "년 <br>";
					res += "생월 : " + birthMonth.trim() + "월 <br>";
					res += "생일 : " + birthDay + "일 <br>";
					res += "성별 : 여성<br>";
					res += "나이 : " + (nowYear-1900-birthYear) ;
				}
			}else{
				res = "잘못된 주민등록번호입니다.";
			}
		}else if (gender == 3 || gender == 4){
			if (birthMonth <= 12 || birthDay <= 31) {
				if (gender == 3) {
					res = "생년 : 20" +birthYear + "년 <br>";
					res += "생월 : " + birthMonth.trim() + "월 <br>";
					res += "생일 : " + birthDay + "일 <br>";
					res += "성별 : 남성<br>";
					res += "나이 : " + (nowYear-2000-birthYear) ;
				}else{
					res = "생년 : 20" +birthYear + "년 <br>";
					res += "생월 : " + birthMonth.trim() + "월 <br>";
					res += "생일 : " + birthDay + "일 <br>";
					res += "성별 : 여성<br>";
					res += "나이 : " + (nowYear-2000-birthYear) ;
				}
			}else{
				res = "잘못된 주민등록번호입니다.";
			}
		}else{
			res = "잘못된 주민등록번호입니다.";
		}
		
		document.querySelector('#result1').innerHTML = res;
		
	}
	function proc2(){
		str = "234567892345"; // 문자열
		sum = 0;
		code = prompt("주민등록번호 입력" , "991010-1234567")
		codearr = code.split("-"); // 배열로 리턴
		
		code = codearr[0].concat(codearr[1]); // 배열 : 9910101234567
		console.log("code=" + code);
		console.log("code.length =" + code.length);
		
		for(i=0; i <code.length-1; i++){
			sum += str.substr(i,1)*code[i];
		}
		
		value = (11 - sum%11)%10;
		
		res = "입력 : " + codearr[0] + " - " + codearr[1] + "<br>";
		if(value == code[code.length-1]){
			res += "올바른 번호";
		}else{
			res += "올바르지 않은 번호";
		}
			document.querySelector('#result2').innerHTML = res;
		
// 		code = prompt("주민등록번호를 입력해주세요");
// 		A = parseInt(code.slice(0,1)); 
// 		B = parseInt(code.slice(1,2)); 
// 		C = parseInt(code.slice(2,3)); 
// 		D = parseInt(code.slice(3,4));
// 		E = parseInt(code.slice(4,5));
// 		F = parseInt(code.slice(5,6));
// 		G = parseInt(code.slice(7,8));
// 		H = parseInt(code.slice(8,9));
// 		I = parseInt(code.slice(9,10));
// 		J = parseInt(code.slice(10,11));
// 		K = parseInt(code.slice(11,12));
// 		L = parseInt(code.slice(12,13));
// 		M = parseInt(code.slice(13,14));
		
// 		sum = A*2 + B*3 + C*4 + D*5 + E*6 + F*7 + G*8 + H*9 + I*2 + J*3 + K*+4 + L*5; // 1번
// 		div = sum % 11; // 2번
// 		sub = 11-div; // 3번
// 		res = sub%10; // 4번
// 		if (res==M) {
// 			document.querySelector('#result2').innerHTML = "올바른 주민등록번호입니다.";
// 		}else{
// 			document.querySelector('#result2').innerHTML = "올바르지않은  주민등록번호입니다.<br>";
// 		}
	}
</script>
<style>
</style>
</head>
<body>
<div class ="box">
	<h3>1. 성별과 생년월일을 추출</h3>
	<br>
	<input type = "button" value = "생년월일" onclick = "proc1()">
	<br><br>
	<div id = "result1"></div>
</div>
<div class ="box">
	<h3>2. 주민등록번호의 유효성검사</h3>
	<br>
	<input type = "button" value = "유효" onclick = "proc2()">
	<br><br>
	<div id = "result2"></div>
</div>

</body>
</html>